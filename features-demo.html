<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ SkunkSquad Features Demo</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/components.css">
    <link rel="stylesheet" href="./styles/notifications.css">
    <link rel="stylesheet" href="./styles/loading-overlay.css">
    <link rel="stylesheet" href="./styles/supply-counter.css">
    
    <style>
        body {
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .demo-section {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .demo-section h2 {
            color: #8b5cf6;
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .demo-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }
        
        .demo-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
        }
        
        .demo-output {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: #a78bfa;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            padding: 20px;
        }
        
        .feature-card h3 {
            margin-top: 0;
            color: white;
        }
        
        .feature-card p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            line-height: 1.6;
        }
        
        .inline-display {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 8px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>üß™ SkunkSquad NFT - Features Demo</h1>
    <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 30px;">
        Test and explore all the new functionality added to the SkunkSquad platform.
    </p>

    <!-- Notifications Demo -->
    <div class="demo-section">
        <h2>üçû Toast Notifications</h2>
        <p>Modern toast notifications replacing old alert() popups</p>
        
        <div class="demo-buttons">
            <button class="demo-button" onclick="testSuccess()">‚úÖ Success</button>
            <button class="demo-button" onclick="testError()">‚ùå Error</button>
            <button class="demo-button" onclick="testWarning()">‚ö†Ô∏è Warning</button>
            <button class="demo-button" onclick="testInfo()">‚ÑπÔ∏è Info</button>
            <button class="demo-button" onclick="testLoading()">‚è≥ Loading</button>
            <button class="demo-button" onclick="testTransaction()">üì° Transaction</button>
            <button class="demo-button" onclick="window.notifications.clearAll()">üßπ Clear All</button>
        </div>
    </div>

    <!-- Loading Overlay Demo -->
    <div class="demo-section">
        <h2>‚è≥ Loading Overlay</h2>
        <p>Full-screen loading overlay with customizable messages</p>
        
        <div class="demo-buttons">
            <button class="demo-button" onclick="testLoadingOverlay()">Show Loading (3s)</button>
            <button class="demo-button" onclick="testConnecting()">Connecting Wallet</button>
            <button class="demo-button" onclick="testMinting()">Minting NFTs</button>
            <button class="demo-button" onclick="testProcessing()">Processing TX</button>
            <button class="demo-button" onclick="window.loadingOverlay.hide()">Hide</button>
        </div>
    </div>

    <!-- Supply Counter Demo -->
    <div class="demo-section">
        <h2>üìä Live Supply Counter</h2>
        <p>Real-time NFT supply tracking from smart contract</p>
        
        <!-- Full Display -->
        <div data-supply-counter></div>
        
        <div class="feature-grid" style="margin-top: 20px;">
            <div class="feature-card">
                <h3>Current Supply</h3>
                <div style="font-size: 32px; font-weight: 700; color: #8b5cf6; font-family: 'JetBrains Mono', monospace;">
                    <span data-supply-counter data-supply-format="current">Loading...</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>Remaining</h3>
                <div style="font-size: 32px; font-weight: 700; color: #8b5cf6; font-family: 'JetBrains Mono', monospace;">
                    <span data-supply-counter data-supply-format="remaining">Loading...</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>Percentage</h3>
                <div style="font-size: 32px; font-weight: 700; color: #8b5cf6; font-family: 'JetBrains Mono', monospace;">
                    <span data-supply-counter data-supply-format="percentage">Loading...</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>Fraction</h3>
                <div style="font-size: 24px; font-weight: 700; color: #8b5cf6; font-family: 'JetBrains Mono', monospace;">
                    <span data-supply-counter data-supply-format="fraction">Loading...</span>
                </div>
            </div>
        </div>
        
        <div class="demo-buttons">
            <button class="demo-button" onclick="refreshSupply()">üîÑ Refresh Supply</button>
            <button class="demo-button" onclick="showSupplyData()">üìä Get Supply Data</button>
        </div>
        
        <div id="supply-output" class="demo-output" style="display: none;"></div>
    </div>

    <!-- ETH Price Demo -->
    <div class="demo-section">
        <h2>üí∞ ETH Price Fetcher</h2>
        <p>Real-time Ethereum price with automatic conversions</p>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h3>Current ETH Price</h3>
                <div style="font-size: 32px; font-weight: 700; color: #22c55e; font-family: 'JetBrains Mono', monospace;">
                    <span data-eth-price data-eth-price-format="price">Loading...</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>0.01 ETH in USD</h3>
                <div style="font-size: 32px; font-weight: 700; color: #22c55e; font-family: 'JetBrains Mono', monospace;">
                    <span data-eth-price data-eth-price-format="usd" data-eth-amount="0.01">Loading...</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>Mint Price</h3>
                <div style="font-size: 20px; font-weight: 600; color: white;">
                    <span data-eth-price data-eth-price-format="conversion" data-eth-amount="0.01">Loading...</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>10 NFTs Cost</h3>
                <div style="font-size: 20px; font-weight: 600; color: white;">
                    <span data-eth-price data-eth-price-format="conversion" data-eth-amount="0.1">Loading...</span>
                </div>
            </div>
        </div>
        
        <div class="demo-buttons">
            <button class="demo-button" onclick="refreshPrice()">üîÑ Refresh Price</button>
            <button class="demo-button" onclick="showPriceData()">üí∞ Get Price Data</button>
            <button class="demo-button" onclick="convertEth()">üîÑ Convert 1 ETH</button>
        </div>
        
        <div id="price-output" class="demo-output" style="display: none;"></div>
    </div>

    <!-- Balance Checker Demo -->
    <div class="demo-section">
        <h2>üí≥ Wallet Balance Checker</h2>
        <p>Check ETH balance and NFT holdings</p>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h3>ETH Balance</h3>
                <div style="font-size: 24px; font-weight: 700; color: #60a5fa;">
                    <span data-eth-balance data-eth-balance-format="full">Connect wallet</span>
                </div>
            </div>
            
            <div class="feature-card">
                <h3>SkunkSquad NFTs</h3>
                <div style="font-size: 32px; font-weight: 700; color: #60a5fa; font-family: 'JetBrains Mono', monospace;">
                    <span data-nft-balance>Connect wallet</span>
                </div>
            </div>
        </div>
        
        <div class="demo-buttons">
            <button class="demo-button" onclick="checkBalances()">üí≥ Check Balances</button>
            <button class="demo-button" onclick="checkAffordability()">ü§î Can Afford 1 NFT?</button>
            <button class="demo-button" onclick="showBalanceData()">üìä Get Balance Data</button>
        </div>
        
        <div id="balance-output" class="demo-output" style="display: none;"></div>
    </div>

    <!-- Transaction Tracker Demo -->
    <div class="demo-section">
        <h2>üì° Transaction Status Tracker</h2>
        <p>Monitor transaction status with confirmation tracking</p>
        
        <div class="demo-buttons">
            <button class="demo-button" onclick="simulateTransaction()">üß™ Simulate TX</button>
            <button class="demo-button" onclick="showPending()">üìã Show Pending</button>
            <button class="demo-button" onclick="clearCompleted()">üßπ Clear Completed</button>
        </div>
        
        <div id="tx-output" class="demo-output" style="display: none;"></div>
    </div>

    <!-- API Reference -->
    <div class="demo-section">
        <h2>üìö Quick API Reference</h2>
        
        <div style="font-size: 13px; line-height: 1.8; color: rgba(255, 255, 255, 0.7);">
            <p><strong>Notifications:</strong> <code>window.notifications.success/error/warning/info/loading(message, options)</code></p>
            <p><strong>Loading:</strong> <code>window.showLoading(message, submessage)</code> / <code>window.hideLoading()</code></p>
            <p><strong>Supply:</strong> <code>window.supplyCounter.getSupplyData()</code> / <code>window.supplyCounter.refresh()</code></p>
            <p><strong>Price:</strong> <code>window.ethPrice.getPrice()</code> / <code>window.ethPrice.ethToUsd(amount)</code></p>
            <p><strong>Balance:</strong> <code>window.balanceChecker.getBalances()</code> / <code>window.balanceChecker.canAffordMint(qty)</code></p>
            <p><strong>TX Tracker:</strong> <code>window.txTracker.track(hash, metadata)</code> / <code>window.txTracker.getStatus()</code></p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
    <script src="./src/js/config.js"></script>
    <script src="./src/js/notifications.js"></script>
    <script src="./src/js/loading-overlay.js"></script>
    <script src="./src/js/supply-counter.js"></script>
    <script src="./src/js/transaction-tracker.js"></script>
    <script src="./src/js/eth-price.js"></script>
    <script src="./src/js/balance-checker.js"></script>
    <script src="./src/js/wallet.js"></script>
    
    <script>
        // Notification Tests
        function testSuccess() {
            window.notifications.success('This is a success notification!', {
                title: '‚úÖ Success',
                duration: 5000
            });
        }
        
        function testError() {
            window.notifications.error('This is an error notification!', {
                title: '‚ùå Error',
                duration: 7000
            });
        }
        
        function testWarning() {
            window.notifications.warning('This is a warning notification!', {
                duration: 5000
            });
        }
        
        function testInfo() {
            window.notifications.info('This is an info notification!');
        }
        
        function testLoading() {
            const toast = window.notifications.loading('Processing your request...');
            setTimeout(() => {
                window.notifications.update(toast, 'Request completed successfully!', 'success', {
                    duration: 5000
                });
            }, 3000);
        }
        
        function testTransaction() {
            const fakeHash = '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');
            window.notifications.transaction(fakeHash, window.SkunkSquadConfig);
        }
        
        // Loading Overlay Tests
        function testLoadingOverlay() {
            window.loadingOverlay.show('Loading...', 'Please wait while we process your request');
            setTimeout(() => window.loadingOverlay.hide(), 3000);
        }
        
        function testConnecting() {
            window.loadingOverlay.connecting('MetaMask');
            setTimeout(() => window.loadingOverlay.hide(), 3000);
        }
        
        function testMinting() {
            window.loadingOverlay.minting(5);
            setTimeout(() => window.loadingOverlay.hide(), 3000);
        }
        
        function testProcessing() {
            window.loadingOverlay.processing();
            setTimeout(() => window.loadingOverlay.hide(), 3000);
        }
        
        // Supply Counter Tests
        async function refreshSupply() {
            window.showLoading('Fetching supply...');
            await window.supplyCounter.refresh();
            window.hideLoading();
            window.notifications.success('Supply refreshed!');
        }
        
        function showSupplyData() {
            const data = window.supplyCounter.getSupplyData();
            const output = document.getElementById('supply-output');
            output.style.display = 'block';
            output.innerHTML = `
                <strong>Supply Data:</strong><br>
                Current: ${data.current}<br>
                Max: ${data.max}<br>
                Remaining: ${data.remaining}<br>
                Percentage: ${data.percentage}%<br>
                Sold Out: ${data.isSoldOut}
            `;
        }
        
        // Price Tests
        async function refreshPrice() {
            window.showLoading('Fetching ETH price...');
            await window.ethPrice.refresh();
            window.hideLoading();
            window.notifications.success('Price updated!');
        }
        
        function showPriceData() {
            const data = window.ethPrice.getPrice();
            const output = document.getElementById('price-output');
            output.style.display = 'block';
            output.innerHTML = `
                <strong>Price Data:</strong><br>
                USD: $${data.usd?.toFixed(2) || 'N/A'}<br>
                Last Update: ${data.lastUpdate || 'Never'}<br>
                Is Stale: ${data.isStale}
            `;
        }
        
        function convertEth() {
            const usd = window.ethPrice.ethToUsd(1);
            const output = document.getElementById('price-output');
            output.style.display = 'block';
            output.innerHTML = `<strong>1 ETH = $${usd?.toFixed(2) || 'N/A'}</strong>`;
        }
        
        // Balance Tests
        async function checkBalances() {
            if (!window.walletManager?.isConnected) {
                window.notifications.warning('Please connect your wallet first!');
                return;
            }
            
            window.showLoading('Checking balances...');
            await window.balanceChecker.refresh();
            window.hideLoading();
            window.notifications.success('Balances updated!');
        }
        
        function checkAffordability() {
            const check = window.balanceChecker.canAffordMint(1);
            
            if (!check) {
                window.notifications.warning('Please connect wallet and check balances first!');
                return;
            }
            
            if (check.canAfford) {
                window.notifications.success(`Yes! You have ${check.balance.toFixed(4)} ETH and need ${check.needed.toFixed(4)} ETH`);
            } else {
                window.notifications.error(`No! You need ${check.shortfall.toFixed(4)} more ETH`);
            }
        }
        
        function showBalanceData() {
            const data = window.balanceChecker.getBalances();
            const output = document.getElementById('balance-output');
            output.style.display = 'block';
            output.innerHTML = `
                <strong>Balance Data:</strong><br>
                ETH: ${data.eth?.formatted || 'N/A'} ETH<br>
                NFTs: ${data.nfts?.count || 0} SkunkSquad NFTs
            `;
        }
        
        // Transaction Tests
        function simulateTransaction() {
            const fakeHash = '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');
            
            window.txTracker.track(fakeHash, {
                type: 'mint',
                quantity: 2
            });
            
            window.notifications.success('Simulated transaction tracked!');
        }
        
        function showPending() {
            const pending = window.txTracker.getPendingTransactions();
            const status = window.txTracker.getStatus();
            const output = document.getElementById('tx-output');
            output.style.display = 'block';
            output.innerHTML = `
                <strong>Transaction Status:</strong><br>
                Total: ${status.total}<br>
                Pending: ${status.pending}<br>
                Confirmed: ${status.confirmed}<br>
                Failed: ${status.failed}<br>
                <br>
                ${pending.length > 0 ? '<strong>Pending TXs:</strong><br>' + pending.map(tx => `${tx.hash.substring(0, 10)}... (${tx.status})`).join('<br>') : 'No pending transactions'}
            `;
        }
        
        function clearCompleted() {
            window.txTracker.clearCompleted();
            window.notifications.success('Cleared completed transactions!');
        }
        
        console.log('üß™ Demo page loaded. All features ready to test!');
        console.log('Open console to see API methods and events');
    </script>
</body>
</html>
